//https://unpkg.com/@hotwired/turbo@7.0.0-beta.1/dist/turbo.es2017-umd.js
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Turbo={})}(this,(function(t){"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const t=HTMLElement,e=function(){return Reflect.construct(t,[],this.constructor)};window.HTMLElement=e,HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}();const e=new WeakMap;function s(t){const s=function(t){const e=t instanceof Element?t:t instanceof Node?t.parentElement:null,s=e?e.closest("input, button"):null;return"submit"==(null==s?void 0:s.getAttribute("type"))?s:null}(t.target);s&&s.form&&e.set(s.form,s)}"SubmitEvent"in window||(addEventListener("click",s,!0),Object.defineProperty(Event.prototype,"submitter",{get(){if("submit"==this.type&&this.target instanceof HTMLFormElement)return e.get(this.target)}}));class i{constructor(t){const e=document.createElement("a");e.href=t,this.absoluteURL=e.href;const s=e.hash.length;s<2?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-s),this.anchor=e.hash.slice(1))}static get currentLocation(){return this.wrap(window.location.toString())}static wrap(t){return"string"==typeof t?new this(t):null!=t?t:void 0}getOrigin(){return this.absoluteURL.split("/",3).join("/")}getPath(){return(this.requestURL.match(/\/\/[^/]*(\/[^?;]*)/)||[])[1]||"/"}getPathComponents(){return this.getPath().split("/").slice(1)}getLastPathComponent(){return this.getPathComponents().slice(-1)[0]}getExtension(){return(this.getLastPathComponent().match(/\.[^.]*$/)||[])[0]||""}isHTML(){return!!this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)}isPrefixedBy(t){const e=function(t){return e=t.getOrigin()+t.getPath(),s=e,i="/",s.slice(-i.length)===i?e:e+"/";var e,s,i}(t);return this.isEqualTo(t)||(s=this.absoluteURL,i=e,s.slice(0,i.length)===i);var s,i}isEqualTo(t){return t&&this.absoluteURL===t.absoluteURL}toCacheKey(){return this.requestURL}toJSON(){return this.absoluteURL}toString(){return this.absoluteURL}valueOf(){return this.absoluteURL}}class r{constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get redirected(){return this.response.redirected}get location(){return i.wrap(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^text\/html|^application\/xhtml\+xml/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.text()}get responseHTML(){return this.isHTML?this.response.text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}}function n(t,{target:e,cancelable:s,detail:i}={}){const r=new CustomEvent(t,{cancelable:s,bubbles:!0,detail:i});return(e||document.documentElement).dispatchEvent(r),r}function o(){return new Promise((t=>requestAnimationFrame((()=>t()))))}function a(){return Promise.resolve()}function l(t,...e){const s=function(t,e){return t.reduce(((t,s,i)=>t+s+(null==e[i]?"":e[i])),"")}(t,e).replace(/^\n/,"").split("\n"),i=s[0].match(/^\s+/),r=i?i[0].length:0;return s.map((t=>t.slice(r))).join("\n")}function h(){return Array.apply(null,{length:36}).map(((t,e)=>8==e||13==e||18==e||23==e?"-":14==e?"4":19==e?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16))).join("")}var c,d;!function(t){t[t.get=0]="get",t[t.post=1]="post",t[t.put=2]="put",t[t.patch=3]="patch",t[t.delete=4]="delete"}(c||(c={}));class u{constructor(t,e,s,i){this.abortController=new AbortController,this.delegate=t,this.method=e,this.location=s,this.body=i}get url(){const t=this.location.absoluteURL,e=this.params.toString();return this.isIdempotent&&e.length?[t,e].join(t.includes("?")?"&":"?"):t}get params(){return this.entries.reduce(((t,[e,s])=>(t.append(e,s.toString()),t)),new URLSearchParams)}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:t}=this;n("turbo:before-fetch-request",{detail:{fetchOptions:t}});try{this.delegate.requestStarted(this);const e=await fetch(this.url,t);return await this.receive(e)}catch(t){throw this.delegate.requestErrored(this,t),t}finally{this.delegate.requestFinished(this)}}async receive(t){const e=new r(t);return n("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e}}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get fetchOptions(){return{method:c[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isIdempotent?void 0:this.body,signal:this.abortSignal}}get isIdempotent(){return this.method==c.get}get headers(){return Object.assign({Accept:"text/html, application/xhtml+xml"},this.additionalHeaders)}get additionalHeaders(){return"function"==typeof this.delegate.additionalHeadersForRequest?this.delegate.additionalHeadersForRequest(this):{}}get abortSignal(){return this.abortController.signal}}class m{constructor(t,e){this.submitBubbled=t=>{if(t.target instanceof HTMLFormElement){const e=t.target,s=t.submitter||void 0;this.delegate.shouldInterceptFormSubmission(e,s)&&(t.preventDefault(),t.stopImmediatePropagation(),this.delegate.formSubmissionIntercepted(e,s))}},this.delegate=t,this.element=e}start(){this.element.addEventListener("submit",this.submitBubbled)}stop(){this.element.removeEventListener("submit",this.submitBubbled)}}!function(t){t[t.initialized=0]="initialized",t[t.requesting=1]="requesting",t[t.waiting=2]="waiting",t[t.receiving=3]="receiving",t[t.stopping=4]="stopping",t[t.stopped=5]="stopped"}(d||(d={}));class p{constructor(t,e,s,i=!1){this.state=d.initialized,this.delegate=t,this.formElement=e,this.formData=function(t,e){const s=new FormData(t),i=null==e?void 0:e.getAttribute("name"),r=null==e?void 0:e.getAttribute("value");i&&s.get(i)!=r&&s.append(i,r||"");return s}(e,s),this.submitter=s,this.fetchRequest=new u(this,this.method,this.location,this.formData),this.mustRedirect=i}get method(){var t;return function(t){switch(t.toLowerCase()){case"get":return c.get;case"post":return c.post;case"put":return c.put;case"patch":return c.patch;case"delete":return c.delete}}(((null===(t=this.submitter)||void 0===t?void 0:t.getAttribute("formmethod"))||this.formElement.method).toLowerCase())||c.get}get action(){var t;return(null===(t=this.submitter)||void 0===t?void 0:t.getAttribute("formaction"))||this.formElement.action}get location(){return i.wrap(this.action)}async start(){const{initialized:t,requesting:e}=d;if(this.state==t)return this.state=e,this.fetchRequest.perform()}stop(){const{stopping:t,stopped:e}=d;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}additionalHeadersForRequest(t){const e={};if(this.method!=c.get){const t=function(t){if(null!=t){const e=(document.cookie?document.cookie.split("; "):[]).find((e=>e.startsWith(t)));if(e){const t=e.split("=").slice(1).join("=");return t?decodeURIComponent(t):void 0}}}(g("csrf-param"))||g("csrf-token");t&&(e["X-CSRF-Token"]=t)}return e}requestStarted(t){this.state=d.waiting,n("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(this.requestMustRedirect(t)&&!e.redirected){const t=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,t)}else this.state=d.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){this.state=d.stopped,n("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}requestMustRedirect(t){return!t.isIdempotent&&this.mustRedirect}}function g(t){const e=document.querySelector(`meta[name="${t}"]`);return e&&e.content}class f{constructor(t,e){this.clickBubbled=t=>{this.respondsToEventTarget(t.target)?this.clickEvent=t:delete this.clickEvent},this.linkClicked=t=>{this.clickEvent&&this.respondsToEventTarget(t.target)&&t.target instanceof Element&&this.delegate.shouldInterceptLinkClick(t.target,t.detail.url)&&(this.clickEvent.preventDefault(),t.preventDefault(),this.delegate.linkClickIntercepted(t.target,t.detail.url)),delete this.clickEvent},this.willVisit=()=>{delete this.clickEvent},this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(t){const e=t instanceof Element?t:t instanceof Node?t.parentElement:null;return e&&e.closest("turbo-frame, html")==this.element}}class v{constructor(t){this.resolveVisitPromise=()=>{},this.element=t,this.linkInterceptor=new f(this,this.element),this.formInterceptor=new m(this,this.element)}connect(){this.linkInterceptor.start(),this.formInterceptor.start()}disconnect(){this.linkInterceptor.stop(),this.formInterceptor.stop()}shouldInterceptLinkClick(t,e){return this.shouldInterceptNavigation(t)}linkClickIntercepted(t,e){this.navigateFrame(t,e)}shouldInterceptFormSubmission(t){return this.shouldInterceptNavigation(t)}formSubmissionIntercepted(t,e){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new p(this,t,e),this.formSubmission.fetchRequest.isIdempotent?this.navigateFrame(t,this.formSubmission.fetchRequest.url):this.formSubmission.start()}async visit(t){const e=i.wrap(t),s=new u(this,c.get,e);return new Promise((t=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},t()},s.perform()}))}additionalHeadersForRequest(t){return{"Turbo-Frame":this.id}}requestStarted(t){this.element.setAttribute("busy","")}requestPreventedHandlingResponse(t,e){this.resolveVisitPromise()}async requestSucceededWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}requestFailedWithResponse(t,e){console.error(e),this.resolveVisitPromise()}requestErrored(t,e){console.error(e),this.resolveVisitPromise()}requestFinished(t){this.element.removeAttribute("busy")}formSubmissionStarted(t){}formSubmissionSucceededWithResponse(t,e){this.findFrameElement(t.formElement).controller.loadResponse(e)}formSubmissionFailedWithResponse(t,e){}formSubmissionErrored(t,e){}formSubmissionFinished(t){}navigateFrame(t,e){this.findFrameElement(t).src=e}findFrameElement(t){var e;return null!==(e=b(t.getAttribute("data-turbo-frame")))&&void 0!==e?e:this.element}async loadResponse(t){const e=function(t=""){return document.implementation.createHTMLDocument().createRange().createContextualFragment(t)}(await t.responseHTML),s=await this.extractForeignFrameElement(e);s&&(await o(),this.loadFrameElement(s),this.scrollFrameIntoView(s),await o(),this.focusFirstAutofocusableElement())}async extractForeignFrameElement(t){let e;const s=CSS.escape(this.id);return(e=E(t.querySelector(`turbo-frame#${s}`)))?e:(e=E(t.querySelector(`turbo-frame[src][recurse~=${s}]`)))?(await e.loaded,await this.extractForeignFrameElement(e)):void 0}loadFrameElement(t){var e;const s=document.createRange();s.selectNodeContents(this.element),s.deleteContents();const i=null===(e=t.ownerDocument)||void 0===e?void 0:e.createRange();i&&(i.selectNodeContents(t),this.element.appendChild(i.extractContents()))}focusFirstAutofocusableElement(){const t=this.firstAutofocusableElement;return!!t&&(t.focus(),!0)}scrollFrameIntoView(t){if(this.element.autoscroll||t.autoscroll){const t=this.element.firstElementChild,i=(e=this.element.getAttribute("data-autoscroll-block"),s="end","end"==e||"start"==e||"center"==e||"nearest"==e?e:s);if(t)return t.scrollIntoView({block:i}),!0}var e,s;return!1}shouldInterceptNavigation(t){const e=t.getAttribute("data-turbo-frame")||this.element.getAttribute("target");if(!this.enabled||"_top"==e)return!1;if(e){const t=b(e);if(t)return!t.disabled}return!0}get firstAutofocusableElement(){const t=this.element.querySelector("[autofocus]");return t instanceof HTMLElement?t:null}get id(){return this.element.id}get enabled(){return!this.element.disabled}}function b(t){if(null!=t){const e=document.getElementById(t);if(e instanceof y)return e}}function E(t){if(t&&t.ownerDocument!==document&&(t=document.importNode(t,!0)),t instanceof y)return t}class y extends HTMLElement{constructor(){super(),this.controller=new v(this)}static get observedAttributes(){return["src"]}connectedCallback(){this.controller.connect()}disconnectedCallback(){this.controller.disconnect()}attributeChangedCallback(){if(this.src&&this.isActive){const t=this.controller.visit(this.src);Object.defineProperty(this,"loaded",{value:t,configurable:!0})}}formSubmissionIntercepted(t,e){this.controller.formSubmissionIntercepted(t,e)}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get loaded(){return Promise.resolve(void 0)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var t,e;return null===(e=null===(t=this.ownerDocument)||void 0===t?void 0:t.documentElement)||void 0===e?void 0:e.hasAttribute("data-turbo-preview")}}customElements.define("turbo-frame",y);const w={append(){var t;null===(t=this.targetElement)||void 0===t||t.append(this.templateContent)},prepend(){var t;null===(t=this.targetElement)||void 0===t||t.prepend(this.templateContent)},remove(){var t;null===(t=this.targetElement)||void 0===t||t.remove()},replace(){var t;null===(t=this.targetElement)||void 0===t||t.replaceWith(this.templateContent)},update(){this.targetElement&&(this.targetElement.innerHTML="",this.targetElement.append(this.templateContent))}};class S extends HTMLElement{async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){var t;return null!==(t=this.renderPromise)&&void 0!==t?t:this.renderPromise=(async()=>{this.dispatchEvent(this.beforeRenderEvent)&&(await o(),this.performAction())})()}disconnect(){try{this.remove()}catch(t){}}get performAction(){if(this.action){const t=w[this.action];if(t)return t;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElement(){var t;if(this.target)return null===(t=this.ownerDocument)||void 0===t?void 0:t.getElementById(this.target);this.raise("target attribute is missing")}get templateContent(){return this.templateElement.content}get templateElement(){if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}raise(t){throw new Error(`${this.description}: ${t}`)}get description(){var t,e;return null!==(e=(null!==(t=this.outerHTML.match(/<[^>]+>/))&&void 0!==t?t:[])[0])&&void 0!==e?e:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0})}}customElements.define("turbo-stream",S),(()=>{let t=document.currentScript;if(t&&!t.hasAttribute("data-turbo-suppress-warning"))for(;t=t.parentElement;)if(t==document.body)return console.warn(l`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwire.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,t.outerHTML)})();class L{constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return l`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 9999;
        transition:
          width ${L.animationDuration}ms ease-out,
          opacity ${L.animationDuration/2}ms ${L.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement((()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1})))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,1.5*L.animationDuration)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,L.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame((()=>{this.progressElement.style.width=10+90*this.value+"%"}))}createStylesheetElement(){const t=document.createElement("style");return t.type="text/css",t.textContent=L.defaultCSS,t}createProgressElement(){const t=document.createElement("div");return t.className="turbo-progress-bar",t}}L.animationDuration=300;function C(t){return function(t){return"script"==t.tagName.toLowerCase()}(t)?"script":function(t){const e=t.tagName.toLowerCase();return"style"==e||"link"==e&&"stylesheet"==t.getAttribute("rel")}(t)?"stylesheet":void 0}function R(t){return"reload"==t.getAttribute("data-turbo-track")}class T{constructor(t,e){this.headDetails=t,this.bodyElement=e}static wrap(t){return t instanceof this?t:"string"==typeof t?this.fromHTMLString(t):this.fromHTMLElement(t)}static fromHTMLString(t){const{documentElement:e}=(new DOMParser).parseFromString(t,"text/html");return this.fromHTMLElement(e)}static fromHTMLElement(t){const e=t.querySelector("head"),s=t.querySelector("body")||document.createElement("body");return new this(class{constructor(t){this.detailsByOuterHTML=t.reduce(((t,e)=>{const{outerHTML:s}=e,i=s in t?t[s]:{type:C(e),tracked:R(e),elements:[]};return Object.assign(Object.assign({},t),{[s]:Object.assign(Object.assign({},i),{elements:[...i.elements,e]})})}),{})}static fromHeadElement(t){return new this(t?[...t.children]:[])}getTrackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter((t=>this.detailsByOuterHTML[t].tracked)).join("")}getScriptElementsNotInDetails(t){return this.getElementsMatchingTypeNotInDetails("script",t)}getStylesheetElementsNotInDetails(t){return this.getElementsMatchingTypeNotInDetails("stylesheet",t)}getElementsMatchingTypeNotInDetails(t,e){return Object.keys(this.detailsByOuterHTML).filter((t=>!(t in e.detailsByOuterHTML))).map((t=>this.detailsByOuterHTML[t])).filter((({type:e})=>e==t)).map((({elements:[t]})=>t))}getProvisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce(((t,e)=>{const{type:s,tracked:i,elements:r}=this.detailsByOuterHTML[e];return null!=s||i?r.length>1?[...t,...r.slice(1)]:t:[...t,...r]}),[])}getMetaValue(t){const e=this.findMetaElementByName(t);return e?e.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce(((e,s)=>{const{elements:[i]}=this.detailsByOuterHTML[s];return function(t,e){return"meta"==t.tagName.toLowerCase()&&t.getAttribute("name")==e}(i,t)?i:e}),void 0)}}.fromHeadElement(e),s)}clone(){const{bodyElement:t}=T.fromHTMLString(this.bodyElement.outerHTML);return new T(this.headDetails,t)}getRootLocation(){const t=this.getSetting("root","/");return new i(t)}getCacheControlValue(){return this.getSetting("cache-control")}getElementForAnchor(t){try{return this.bodyElement.querySelector(`[id='${t}'], a[name='${t}']`)}catch(t){return null}}getPermanentElements(){return[...this.bodyElement.querySelectorAll("[id][data-turbo-permanent]")]}getPermanentElementById(t){return this.bodyElement.querySelector(`#${t}[data-turbo-permanent]`)}getPermanentElementsPresentInSnapshot(t){return this.getPermanentElements().filter((({id:e})=>t.getPermanentElementById(e)))}findFirstAutofocusableElement(){return this.bodyElement.querySelector("[autofocus]")}hasAnchor(t){return null!=this.getElementForAnchor(t)}isPreviewable(){return"no-preview"!=this.getCacheControlValue()}isCacheable(){return"no-cache"!=this.getCacheControlValue()}isVisitable(){return"reload"!=this.getSetting("visit-control")}getSetting(t,e){const s=this.headDetails.getMetaValue(`turbo-${t}`);return null==s?e:s}}var k,P;!function(t){t.visitStart="visitStart",t.requestStart="requestStart",t.requestEnd="requestEnd",t.visitEnd="visitEnd"}(k||(k={})),function(t){t.initialized="initialized",t.started="started",t.canceled="canceled",t.failed="failed",t.completed="completed"}(P||(P={}));const A={action:"advance",historyChanged:!1};var F,I;!function(t){t[t.networkFailure=0]="networkFailure",t[t.timeoutFailure=-1]="timeoutFailure",t[t.contentTypeMismatch=-2]="contentTypeMismatch"}(F||(F={}));class H{constructor(t,e,s,i={}){this.identifier=h(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.snapshotCached=!1,this.state=P.initialized,this.performScroll=()=>{this.scrolled||("restore"==this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},this.delegate=t,this.location=e,this.restorationIdentifier=s||h();const{action:r,historyChanged:n,referrer:o,snapshotHTML:a,response:l}=Object.assign(Object.assign({},A),i);this.action=r,this.historyChanged=n,this.referrer=o,this.snapshotHTML=a,this.response=l}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}start(){this.state==P.initialized&&(this.recordTimingMetric(k.visitStart),this.state=P.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==P.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=P.canceled)}complete(){this.state==P.started&&(this.recordTimingMetric(k.visitEnd),this.state=P.completed,this.adapter.visitCompleted(this),this.delegate.visitCompleted(this))}fail(){this.state==P.started&&(this.state=P.failed,this.adapter.visitFailed(this))}changeHistory(){if(!this.historyChanged){const t=this.location.isEqualTo(this.referrer)?"replace":this.action,e=this.getHistoryMethodForAction(t);this.history.update(e,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new u(this,c.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(k.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){const{statusCode:e}=t;M(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric(k.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:t,responseHTML:e}=this.response;this.render((()=>{this.cacheSnapshot(),M(t)&&null!=e?(this.view.render({snapshot:T.fromHTMLString(e)},this.performScroll),this.adapter.visitRendered(this),this.complete()):(this.view.render({error:e},this.performScroll),this.adapter.visitRendered(this),this.fail())}))}}getCachedSnapshot(){const t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!this.location.anchor||t.hasAnchor(this.location.anchor))&&("restore"==this.action||t.isPreviewable()))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return T.wrap(this.snapshotHTML)}hasCachedSnapshot(){return null!=this.getCachedSnapshot()}loadCachedSnapshot(){const t=this.getCachedSnapshot();if(t){const e=this.shouldIssueRequest();this.render((()=>{this.cacheSnapshot(),this.view.render({snapshot:t,isPreview:e},this.performScroll),this.adapter.visitRendered(this),e||this.complete()}))}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&(this.location=this.redirectedToLocation,this.history.replace(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){const s=await e.responseHTML;null==s?this.recordResponse({statusCode:F.contentTypeMismatch}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:e.statusCode,responseHTML:s}))}async requestFailedWithResponse(t,e){const s=await e.responseHTML;null==s?this.recordResponse({statusCode:F.contentTypeMismatch}):this.recordResponse({statusCode:e.statusCode,responseHTML:s})}requestErrored(t,e){this.recordResponse({statusCode:F.networkFailure})}requestFinished(){this.finishRequest()}scrollToRestoredPosition(){const{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){if(null!=this.location.anchor)return this.view.scrollToAnchor(this.location.anchor),!0}scrollToTop(){this.view.scrollToPosition({x:0,y:0})}recordTimingMetric(t){this.timingMetrics[t]=(new Date).getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return"object"==typeof this.response}shouldIssueRequest(){return"restore"!=this.action||!this.hasCachedSnapshot()}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(),this.snapshotCached=!0)}render(t){this.cancelRender(),this.frame=requestAnimationFrame((()=>{delete this.frame,t.call(this)}))}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function M(t){return t>=200&&t<300}class q{constructor(t){this.progressBar=new L,this.showProgressBar=()=>{this.progressBar.show()},this.session=t}visitProposedToLocation(t,e){this.navigator.startVisit(t,h(),e)}visitStarted(t){t.issueRequest(),t.changeHistory(),t.loadCachedSnapshot()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||"restore"!=t.action?this.showProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse()}visitRequestFailedWithStatusCode(t,e){switch(e){case F.networkFailure:case F.timeoutFailure:case F.contentTypeMismatch:return this.reload();default:return t.loadResponse()}}visitRequestFinished(t){this.progressBar.setValue(1),this.hideProgressBar()}visitCompleted(t){t.followRedirect()}pageInvalidated(){this.reload()}visitFailed(t){}visitRendered(t){}showProgressBarAfterDelay(){this.progressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideProgressBar(){this.progressBar.hide(),null!=this.progressBarTimeout&&(window.clearTimeout(this.progressBarTimeout),delete this.progressBarTimeout)}reload(){window.location.reload()}get navigator(){return this.session.navigator}}class B{constructor(t){this.started=!1,this.submitCaptured=()=>{removeEventListener("submit",this.submitBubbled,!1),addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=t=>{if(!t.defaultPrevented){const e=t.target instanceof HTMLFormElement?t.target:void 0,s=t.submitter||void 0;e&&this.delegate.willSubmitForm(e,s)&&(t.preventDefault(),this.delegate.formSubmitted(e,s))}},this.delegate=t}start(){this.started||(addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}class D{constructor(t){this.element=t,this.linkInterceptor=new f(this,t),this.formInterceptor=new m(this,t)}start(){this.linkInterceptor.start(),this.formInterceptor.start()}stop(){this.linkInterceptor.stop(),this.formInterceptor.stop()}shouldInterceptLinkClick(t,e){return this.shouldRedirect(t)}linkClickIntercepted(t,e){const s=this.findFrameElement(t);s&&(s.src=e)}shouldInterceptFormSubmission(t,e){return this.shouldRedirect(t,e)}formSubmissionIntercepted(t,e){const s=this.findFrameElement(t);s&&s.formSubmissionIntercepted(t,e)}shouldRedirect(t,e){const s=this.findFrameElement(t);return!!s&&s!=t.closest("turbo-frame")}findFrameElement(t){const e=t.getAttribute("data-turbo-frame");if(e&&"_top"!=e){const t=this.element.querySelector(`#${e}:not([disabled])`);if(t instanceof y)return t}}}class O{constructor(t){this.restorationIdentifier=h(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=t=>{if(this.shouldHandlePopState()){const{turbo:e}=t.state||{};if(e){const t=i.currentLocation;this.location=t;const{restorationIdentifier:s}=e;this.restorationIdentifier=s,this.delegate.historyPoppedToLocationWithRestorationIdentifier(t,s)}}},this.onPageLoad=async t=>{await a(),this.pageLoaded=!0},this.delegate=t}start(){this.started||(this.previousScrollRestoration=history.scrollRestoration,history.scrollRestoration="manual",addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(i.currentLocation))}stop(){var t;this.started&&(history.scrollRestoration=null!==(t=this.previousScrollRestoration)&&void 0!==t?t:"auto",removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,s=h()){const i={turbo:{restorationIdentifier:s}};t.call(history,i,"",e.absoluteURL),this.location=e,this.restorationIdentifier=s}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){const{restorationIdentifier:e}=this,s=this.restorationData[e];this.restorationData[e]=Object.assign(Object.assign({},s),t)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||"complete"==document.readyState}}class V{constructor(t){this.started=!1,this.clickCaptured=()=>{removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=t=>{if(this.clickEventIsSignificant(t)){const e=this.findLinkFromClickTarget(t.target);if(e){const s=this.getLocationForLink(e);this.delegate.willFollowLinkToLocation(e,s)&&(t.preventDefault(),this.delegate.followedLinkToLocation(e,s))}}},this.delegate=t}start(){this.started||(addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}findLinkFromClickTarget(t){if(t instanceof Element)return t.closest("a[href]:not([target^=_]):not([download])")}getLocationForLink(t){return new i(t.getAttribute("href")||"")}}class N{constructor(t){this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocation(t)&&this.delegate.visitProposedToLocation(t,e)}startVisit(t,e,s={}){this.stop(),this.currentVisit=new H(this,i.wrap(t),e,Object.assign({referrer:this.location},s)),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new p(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(t){}async formSubmissionSucceededWithResponse(t,e){if(console.log("Form submission succeeded",t),t==this.formSubmission){const s=await e.responseHTML;if(s){t.method!=c.get&&(console.log("Clearing snapshot cache after successful form submission"),this.view.clearSnapshotCache());const{statusCode:i}=e,r={response:{statusCode:i,responseHTML:s}};console.log("Visiting",e.location,r),this.proposeVisit(e.location,r)}}}formSubmissionFailedWithResponse(t,e){console.error("Form submission failed",t,e)}formSubmissionErrored(t,e){console.error("Form submission failed",t,e)}formSubmissionFinished(t){}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}}!function(t){t[t.initial=0]="initial",t[t.loading=1]="loading",t[t.interactive=2]="interactive",t[t.complete=3]="complete",t[t.invalidated=4]="invalidated"}(I||(I={}));class x{constructor(t){this.stage=I.initial,this.started=!1,this.interpretReadyState=()=>{const{readyState:t}=this;"interactive"==t?this.pageIsInteractive():"complete"==t&&this.pageIsComplete()},this.delegate=t}start(){this.started||(this.stage==I.initial&&(this.stage=I.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),this.started=!1)}invalidate(){this.stage!=I.invalidated&&(this.stage=I.invalidated,this.delegate.pageInvalidated())}pageIsInteractive(){this.stage==I.loading&&(this.stage=I.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==I.interactive&&(this.stage=I.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class j{constructor(t){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(t){this.delegate.scrollPositionChanged(t)}}class W{constructor(t){this.templateElement=document.createElement("template"),this.templateElement.innerHTML=t}static wrap(t){return"string"==typeof t?new this(t):t}get fragment(){const t=document.createDocumentFragment();for(const e of this.foreignElements)t.appendChild(document.importNode(e,!0));return t}get foreignElements(){return this.templateChildren.reduce(((t,e)=>"turbo-stream"==e.tagName.toLowerCase()?[...t,e]:t),[])}get templateChildren(){return Array.from(this.templateElement.content.children)}}class U{constructor(t){this.sources=new Set,this.started=!1,this.prepareFetchRequest=t=>{var e;const s=null===(e=t.detail)||void 0===e?void 0:e.fetchOptions;if(s){const{headers:t}=s;t.Accept=["text/html; turbo-stream",t.Accept].join(", ")}},this.inspectFetchResponse=t=>{const e=function(t){var e;const s=null===(e=t.detail)||void 0===e?void 0:e.fetchResponse;if(s instanceof r)return s}(t);e&&function(t){var e;const s=null!==(e=t.contentType)&&void 0!==e?e:"";return/text\/html;.*\bturbo-stream\b/.test(s)}(e)&&(t.preventDefault(),this.receiveMessageResponse(e))},this.receiveMessageEvent=t=>{this.started&&"string"==typeof t.data&&this.receiveMessageHTML(t.data)},this.delegate=t}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-request",this.prepareFetchRequest,!0),addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-request",this.prepareFetchRequest,!0),removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}async receiveMessageResponse(t){const e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(new W(t))}}class ${renderView(t){this.delegate.viewWillRender(this.newBody),t(),this.delegate.viewRendered(this.newBody)}invalidateView(){this.delegate.viewInvalidated()}createScriptElement(t){if("false"==t.getAttribute("data-turbo-eval"))return t;{const e=document.createElement("script");return e.textContent=t.textContent,e.async=!1,function(t,e){for(const{name:s,value:i}of[...e.attributes])t.setAttribute(s,i)}(e,t),e}}}class z extends ${constructor(t,e){super(),this.delegate=t,this.htmlElement=(()=>{const t=document.createElement("html");return t.innerHTML=e,t})(),this.newHead=this.htmlElement.querySelector("head")||document.createElement("head"),this.newBody=this.htmlElement.querySelector("body")||document.createElement("body")}static render(t,e,s){return new this(t,s).render(e)}render(t){this.renderView((()=>{this.replaceHeadAndBody(),this.activateBodyScriptElements(),t()}))}replaceHeadAndBody(){const{documentElement:t,head:e,body:s}=document;t.replaceChild(this.newHead,e),t.replaceChild(this.newBody,s)}activateBodyScriptElements(){for(const t of this.getScriptElements()){const e=t.parentNode;if(e){const s=this.createScriptElement(t);e.replaceChild(s,t)}}}getScriptElements(){return[...document.documentElement.querySelectorAll("script")]}}class K{constructor(t){this.keys=[],this.snapshots={},this.size=t}has(t){return t.toCacheKey()in this.snapshots}get(t){if(this.has(t)){const e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[t.toCacheKey()]}write(t,e){this.snapshots[t.toCacheKey()]=e}touch(t){const e=t.toCacheKey(),s=this.keys.indexOf(e);s>-1&&this.keys.splice(s,1),this.keys.unshift(e),this.trim()}trim(){for(const t of this.keys.splice(this.size))delete this.snapshots[t]}}class _ extends ${constructor(t,e,s,i){super(),this.delegate=t,this.currentSnapshot=e,this.currentHeadDetails=e.headDetails,this.newSnapshot=s,this.newHeadDetails=s.headDetails,this.newBody=s.bodyElement,this.isPreview=i}static render(t,e,s,i,r){return new this(t,s,i,r).render(e)}render(t){this.shouldRender()?(this.mergeHead(),this.renderView((()=>{this.replaceBody(),this.isPreview||this.focusFirstAutofocusableElement(),t()}))):this.invalidateView()}mergeHead(){this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()}replaceBody(){const t=this.relocateCurrentBodyPermanentElements();this.activateNewBody(),this.assignNewBody(),this.replacePlaceholderElementsWithClonedPermanentElements(t)}shouldRender(){return this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()}trackedElementsAreIdentical(){return this.currentHeadDetails.getTrackedElementSignature()==this.newHeadDetails.getTrackedElementSignature()}copyNewHeadStylesheetElements(){for(const t of this.getNewHeadStylesheetElements())document.head.appendChild(t)}copyNewHeadScriptElements(){for(const t of this.getNewHeadScriptElements())document.head.appendChild(this.createScriptElement(t))}removeCurrentHeadProvisionalElements(){for(const t of this.getCurrentHeadProvisionalElements())document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(const t of this.getNewHeadProvisionalElements())document.head.appendChild(t)}relocateCurrentBodyPermanentElements(){return this.getCurrentBodyPermanentElements().reduce(((t,e)=>{const s=this.newSnapshot.getPermanentElementById(e.id);if(s){const i=function(t){const e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",t.id),{element:e,permanentElement:t}}(e);return J(e,i.element),J(s,e),[...t,i]}return t}),[])}replacePlaceholderElementsWithClonedPermanentElements(t){for(const{element:e,permanentElement:s}of t){J(e,s.cloneNode(!0))}}activateNewBody(){document.adoptNode(this.newBody),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const t of this.getNewBodyScriptElements()){J(t,this.createScriptElement(t))}}assignNewBody(){document.body?J(document.body,this.newBody):document.documentElement.appendChild(this.newBody)}focusFirstAutofocusableElement(){const t=this.newSnapshot.findFirstAutofocusableElement();(function(t){return t&&"function"==typeof t.focus})(t)&&t.focus()}getNewHeadStylesheetElements(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)}getNewHeadScriptElements(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)}getCurrentHeadProvisionalElements(){return this.currentHeadDetails.getProvisionalElements()}getNewHeadProvisionalElements(){return this.newHeadDetails.getProvisionalElements()}getCurrentBodyPermanentElements(){return this.currentSnapshot.getPermanentElementsPresentInSnapshot(this.newSnapshot)}getNewBodyScriptElements(){return[...this.newBody.querySelectorAll("script")]}}function J(t,e){const s=t.parentElement;if(s)return s.replaceChild(e,t)}class X{constructor(t){this.htmlElement=document.documentElement,this.snapshotCache=new K(10),this.delegate=t}getRootLocation(){return this.getSnapshot().getRootLocation()}getElementForAnchor(t){return this.getSnapshot().getElementForAnchor(t)}getSnapshot(){return T.fromHTMLElement(this.htmlElement)}clearSnapshotCache(){this.snapshotCache.clear()}shouldCacheSnapshot(){return this.getSnapshot().isCacheable()}async cacheSnapshot(){if(this.shouldCacheSnapshot()){this.delegate.viewWillCacheSnapshot();const t=this.getSnapshot(),e=this.lastRenderedLocation||i.currentLocation;await a(),this.snapshotCache.put(e,t.clone())}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}render({snapshot:t,error:e,isPreview:s},i){this.markAsPreview(s),t?this.renderSnapshot(t,s,i):this.renderError(e,i)}scrollToAnchor(t){const e=this.getElementForAnchor(t);e?this.scrollToElement(e):this.scrollToPosition({x:0,y:0})}scrollToElement(t){t.scrollIntoView()}scrollToPosition({x:t,y:e}){window.scrollTo(t,e)}markAsPreview(t){t?this.htmlElement.setAttribute("data-turbo-preview",""):this.htmlElement.removeAttribute("data-turbo-preview")}renderSnapshot(t,e,s){_.render(this.delegate,s,this.getSnapshot(),t,e||!1)}renderError(t,e){z.render(this.delegate,e,t||"")}}const Y=new class{constructor(){this.navigator=new N(this),this.history=new O(this),this.view=new X(this),this.adapter=new q(this),this.pageObserver=new x(this),this.linkClickObserver=new V(this),this.formSubmitObserver=new B(this),this.scrollObserver=new j(this),this.streamObserver=new U(this),this.frameRedirector=new D(document.documentElement),this.enabled=!0,this.progressBarDelay=500,this.started=!1}start(){this.started||(this.pageObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){this.navigator.proposeVisit(i.wrap(t),e)}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){document.documentElement.appendChild(W.wrap(t).fragment)}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){this.progressBarDelay=t}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(t){this.enabled?this.navigator.proposeVisit(t,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated()}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willFollowLinkToLocation(t,e){return this.linkIsVisitable(t)&&this.locationIsVisitable(e)&&this.applicationAllowsFollowingLinkToLocation(t,e)}followedLinkToLocation(t,e){const s=this.getActionForLink(t);this.visit(e,{action:s})}allowsVisitingLocation(t){return this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){this.adapter.visitProposedToLocation(t,e)}visitStarted(t){this.notifyApplicationAfterVisitingLocation(t.location)}visitCompleted(t){this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}willSubmitForm(t,e){return!0}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){}pageInvalidated(){this.adapter.pageInvalidated()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillRender(t){this.notifyApplicationBeforeRender(t)}viewRendered(){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}viewInvalidated(){this.pageObserver.invalidate()}viewWillCacheSnapshot(){this.notifyApplicationBeforeCachingSnapshot()}applicationAllowsFollowingLinkToLocation(t,e){return!this.notifyApplicationAfterClickingLinkToLocation(t,e).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e){return n("turbo:click",{target:t,detail:{url:e.absoluteURL},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return n("turbo:before-visit",{detail:{url:t.absoluteURL},cancelable:!0})}notifyApplicationAfterVisitingLocation(t){return n("turbo:visit",{detail:{url:t.absoluteURL}})}notifyApplicationBeforeCachingSnapshot(){return n("turbo:before-cache")}notifyApplicationBeforeRender(t){return n("turbo:before-render",{detail:{newBody:t}})}notifyApplicationAfterRender(){return n("turbo:render")}notifyApplicationAfterPageLoad(t={}){return n("turbo:load",{detail:{url:this.location.absoluteURL,timing:t}})}getActionForLink(t){const e=t.getAttribute("data-turbo-action");return function(t){return"advance"==t||"replace"==t||"restore"==t}(e)?e:"advance"}linkIsVisitable(t){const e=t.closest("[data-turbo]");return!e||"false"!=e.getAttribute("data-turbo")}locationIsVisitable(t){return t.isPrefixedBy(this.view.getRootLocation())&&t.isHTML()}},{navigator:G}=Y;function Q(){Y.start()}Q(),t.clearCache=function(){Y.clearCache()},t.connectStreamSource=function(t){Y.connectStreamSource(t)},t.disconnectStreamSource=function(t){Y.disconnectStreamSource(t)},t.navigator=G,t.registerAdapter=function(t){Y.registerAdapter(t)},t.renderStreamMessage=function(t){Y.renderStreamMessage(t)},t.setProgressBarDelay=function(t){Y.setProgressBarDelay(t)},t.start=Q,t.visit=function(t,e){Y.visit(t,e)},Object.defineProperty(t,"__esModule",{value:!0})}));